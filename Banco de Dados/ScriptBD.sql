-- MySQL Script generated by MySQL Workbench
-- Thu Jul  6 19:19:41 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Empresa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Empresa` (
  `idEmpresa` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nomeEmpresa` VARCHAR(30) NOT NULL,
  `cnpjEmpresa` DECIMAL(14) ZEROFILL UNSIGNED NOT NULL,
  `horarioAbre` TIME NOT NULL,
  `horarioFecha` TIME NOT NULL,
  `cep` DECIMAL(8) ZEROFILL NOT NULL,
  `logradouro` VARCHAR(40) NOT NULL,
  `numero` INT UNSIGNED NOT NULL,
  `bairro` VARCHAR(20) NOT NULL,
  `cidade` VARCHAR(30) NOT NULL,
  `estado` VARCHAR(2) NOT NULL,
  `complemento` VARCHAR(30) NULL,
  PRIMARY KEY (`idEmpresa`),
  UNIQUE INDEX `cnpjEmpresa_UNIQUE` (`cnpjEmpresa` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Empregado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Empregado` (
  `idEmpregado` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cpfEmpregado` DECIMAL(11) ZEROFILL UNSIGNED NOT NULL,
  `nomeEmpregado` VARCHAR(30) NOT NULL,
  `cargo` VARCHAR(30) NOT NULL,
  `salario` DECIMAL(10,2) NOT NULL,
  `dataInicio` DATE NOT NULL,
  `dataFim` DATE NULL,
  `nomeLoginEmpregado` VARCHAR(30) NOT NULL,
  `senhaLoginEmpregado` VARCHAR(30) NOT NULL,
  `FK_idEmpresa` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idEmpregado`),
  UNIQUE INDEX `cpfEmpregado_UNIQUE` (`cpfEmpregado` ASC) VISIBLE,
  UNIQUE INDEX `nomeLoginEmpregrado_UNIQUE` (`nomeLoginEmpregado` ASC) VISIBLE,
  INDEX `fk_Empregado_Empresa_idx` (`FK_idEmpresa` ASC) VISIBLE,
  CONSTRAINT `fk_Empregado_Empresa`
    FOREIGN KEY (`FK_idEmpresa`)
    REFERENCES `mydb`.`Empresa` (`idEmpresa`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cliente` (
  `idCliente` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cpfCliente` DECIMAL(11) ZEROFILL UNSIGNED NOT NULL,
  `nomeCliente` VARCHAR(30) NOT NULL,
  `nomeLoginCliente` VARCHAR(30) NOT NULL,
  `senhaLoginCliente` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`idCliente`),
  UNIQUE INDEX `cpfCliente_UNIQUE` (`cpfCliente` ASC) VISIBLE,
  UNIQUE INDEX `nomeLoginCliente_UNIQUE` (`nomeLoginCliente` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Console`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Console` (
  `idConsole` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nomeConsole` VARCHAR(30) NOT NULL,
  `nomeFabricante` VARCHAR(50) NOT NULL,
  `dataLancamento` DATE NOT NULL,
  `ehOriginal` BIT(1) NOT NULL,
  `preco` DECIMAL(10,2) UNSIGNED NOT NULL,
  `descricaoConsole` VARCHAR(100) NULL,
  PRIMARY KEY (`idConsole`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Venda_Restauracao`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Venda_Restauracao` (
  `idVenda_Restauracao` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `dataServico` DATE NOT NULL,
  `horaServico` TIME NOT NULL,
  `valorTotal` DECIMAL(10,2) UNSIGNED NOT NULL,
  `ehVenda` BIT(1) NOT NULL,
  `estaEntregue` BIT(1) NOT NULL,
  `qtdeConsoles` INT UNSIGNED NOT NULL,
  `descricaoRestauracao` VARCHAR(100) NULL,
  `avaliacao` TINYINT(1) NULL,
  `FK_idEmpresa` INT UNSIGNED NOT NULL,
  `FK_idCliente` INT UNSIGNED NOT NULL,
  `FK_idConsole` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idVenda_Restauracao`),
  INDEX `fk_Venda_Restauração_Empresa1_idx` (`FK_idEmpresa` ASC) VISIBLE,
  INDEX `fk_Venda_Restauração_Cliente1_idx` (`FK_idCliente` ASC) VISIBLE,
  INDEX `fk_Venda_Restauracao_Console1_idx` (`FK_idConsole` ASC) VISIBLE,
  CONSTRAINT `fk_Venda_Restauração_Empresa1`
    FOREIGN KEY (`FK_idEmpresa`)
    REFERENCES `mydb`.`Empresa` (`idEmpresa`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `fk_Venda_Restauração_Cliente1`
    FOREIGN KEY (`FK_idCliente`)
    REFERENCES `mydb`.`Cliente` (`idCliente`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `fk_Venda_Restauracao_Console1`
    FOREIGN KEY (`FK_idConsole`)
    REFERENCES `mydb`.`Console` (`idConsole`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ContatoCliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ContatoCliente` (
  `telefoneCliente` VARCHAR(14) NOT NULL,
  `FK_idCliente` INT UNSIGNED NOT NULL,
  UNIQUE INDEX `telefoneCliente_UNIQUE` (`telefoneCliente` ASC) VISIBLE,
  PRIMARY KEY (`FK_idCliente`),
  CONSTRAINT `fk_ContatoCliente_Cliente1`
    FOREIGN KEY (`FK_idCliente`)
    REFERENCES `mydb`.`Cliente` (`idCliente`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Estoque`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Estoque` (
  `quantAtual` INT UNSIGNED NOT NULL,
  `FK_idConsole` INT UNSIGNED NOT NULL,
  `FK_idEmpresa` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`FK_idConsole`, `FK_idEmpresa`),
  INDEX `fk_Estoque_Empresa1_idx` (`FK_idEmpresa` ASC) VISIBLE,
  CONSTRAINT `fk_Estoque_Console1`
    FOREIGN KEY (`FK_idConsole`)
    REFERENCES `mydb`.`Console` (`idConsole`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT,
  CONSTRAINT `fk_Estoque_Empresa1`
    FOREIGN KEY (`FK_idEmpresa`)
    REFERENCES `mydb`.`Empresa` (`idEmpresa`)
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Inserts
-- -----------------------------------------------------

INSERT INTO Empresa (idEmpresa, nomeEmpresa, cnpjEmpresa, horarioAbre, horarioFecha, cep, logradouro, numero, bairro, cidade, estado, complemento)
VALUES
(1, "Starlight Ventures", "987654321", "08:00", "17:00", "98765432", "Rua B", 456, "Bairro B", "Rio de Janeiro", "RJ", null),
(2, "Vertex Solutions", "789012345", "11:00", "20:00", "89012345", "Rua E", 654, "Bairro E", "Sao Paulo", "SP", "Complemento E"),
(3, "Nexus Industries", "798890123", "11:30", "20:30", "45678901", "Rua J", 321, "Bairro J", "Belo Horizonte", "MG", null);

INSERT INTO Empregado (idEmpregado, cpfEmpregado, nomeEmpregado, cargo, salario, dataInicio, dataFim, nomeLoginEmpregado, senhaLoginEmpregado, FK_idEmpresa)
VALUES
(1, "12345642356", "João Silva", "Gerente", 5000, "2021-01-01", null, "joao.silva", "senha123", 1),
(2, "98765409863", "Maria Santos", "Vendedor", 2500, "2021-02-01", null, "maria.santos", "senha456", 1),
(3, "56789024361", "Pedro Souza", "Atendente", 1500, "2021-03-01", "2022-06-16", "pedro.souza", "senha789", 1),
(4, "32109809711", "Ana Oliveira", "Gerente", 6000, "2021-04-01", null, "ana.oliveira", "senha012", 2),
(5, "78901222356", "Carlos Mendes", "Vendedor", 2500, "2021-05-01", "2023-04-11", "carlos.mendes", "senha345", 2),
(10, "98638024455", "Juliana Lima", "Vendedor", 2900, "2021-10-01", null, "juliana.lima", "senha890", 2),
(6, "34567809976", "Laura Costa", "Atendente", 1800, "2021-06-01", "2023-01-27", "laura.costa", "senha678", 3),
(7, "90123412532", "Fernando Almeida", "Gerente", 7000, "2021-07-01", null, "fernando.almeida", "senha901", 3),
(8, "45678918333", "Camila Ribeiro", "Vendedor", 2500, "2021-08-01", null, "camila.ribeiro", "senha234", 3),
(9, "89012300192", "Ricardo Santos", "Atendente", 2000, "2021-09-01", "2022-02-22", "ricardo.santos", "senha567", 3);

INSERT INTO Cliente (idCliente, cpfCliente, nomeCliente, nomeLoginCliente, senhaLoginCliente)
VALUES
(1, "92046678900", "Gabriel Silva", "gabriel.silva", "senha123"),
(2, "07258432100", "Mariana Santos", "mariana.santos", "senha456"),
(3, "82903012300", "Rafael Souza", "rafael.souza", "senha789"),
(4, "39023987650", "Isabela Oliveira", "isabela.oliveira", "senha012"),
(5, "82431234500", "Gustavo Mendes", "gustavo.mendes", "senha345"),
(6, "71234890100", "Larissa Costa", "larissa.costa", "senha678"),
(7, "13246456700", "Felipe Almeida", "felipe.almeida", "senha901"),
(8, "29635901200", "Carolina Ribeiro", "carolina.ribeiro", "senha234"),
(9, "43278345600", "Rodrigo Santos", "rodrigo.santos", "senha567"),
(10, "32172012300", "Jéssica Lima", "jessica.lima", "senha890");

INSERT INTO ContatoCliente (FK_idCliente, telefoneCliente)
VALUES
(1, "911111111"),
(2, "922222222"),
(3, "933333333"),
(4, "944444444"),
(5, "955555555"),
(6, "966666666"),
(7, "977777777"),
(8, "988888888"),
(9, "999999999"),
(10, "900000000");

INSERT INTO Console (idConsole, nomeConsole, nomeFabricante, dataLancamento, ehOriginal, preco, descricaoConsole)
VALUES
(1, 'Atari 2600', 'Atari, Inc.', '1977-09-11', FALSE, 199.00, 'O clássico console de videogame que marcou o início da indústria dos jogos eletrônicos.'),
(2, 'Nintendo 64', 'Nintendo Co., Ltd.', '1996-06-23', FALSE, 299.00, 'Um console revolucionário com jogos 3D e o icônico controle com joystick analógico.'),
(3, 'Mega Drive', 'Sega Enterprises Ltd.', '1988-10-29', TRUE, 149.00, 'Um console de 16 bits que competiu com o Super Nintendo e trouxe diversos jogos populares.'),
(4, "Sega Genesis", "Sega Corporation", "1988-10-29", TRUE, 189.99, "Um dos consoles mais populares dos anos 90, conhecido por seus jogos icônicos."),
(5, "Neo Geo", "SNK Corporation", "1990-04-26", TRUE, 649.99, "Um console de alta qualidade com gráficos impressionantes e jogos arcade exclusivos."),
(6, "TurboGrafx-16", "NEC Corporation", "1987-10-30", TRUE, 199.99, "Um console pioneiro que introduziu recursos avançados para a época."),
(7, "Sega Saturn", "Sega Enterprises Ltd.", "1994-11-22", TRUE, 399.99, "Um console de 32 bits que trouxe jogos 3D e recursos inovadores."),
(8, "Commodore 64", "Commodore International", "1982-08-01", TRUE, 595.00, "Um computador pessoal que também era usado para jogos."),
(9, 'PlayStation 2', 'Sony Interactive Entertainment', '2000-03-04', TRUE, 299.00, 'Um console icônico que foi muito popular e teve uma grande biblioteca de jogos.');

INSERT INTO Estoque (quantAtual, FK_idConsole, FK_idEmpresa)
VALUES
(5, 1, 1),
(12, 2, 1),
(3, 3, 2),
(2, 4, 2),
(5, 5, 3),
(3, 6, 3),
(2, 7, 1),
(4, 8, 2),
(21, 9, 3);

INSERT INTO Venda_Restauracao (idVenda_Restauracao, dataServico, horaServico, valorTotal, ehVenda, estaEntregue, qtdeConsoles, descricaoRestauracao, avaliacao, FK_idEmpresa, FK_idCliente, FK_idConsole)
VALUES
(1, "2023-02-20", "09:00", 100.50, TRUE, TRUE, 2, null, 4, 1, 1, 1),
(2, "2023-02-12", "10:30", 75.20, TRUE, FALSE, 1, null, 3, 1, 2, 2),
(3, "2023-03-15", "11:15", 50.00, FALSE, TRUE, 3, "Limpeza do console", 4, 2, 3, 3),
(4, "2023-04-16", "14:00", 120.80, TRUE, TRUE, 1, null, 4, 2, 4, 4),
(5, "2023-05-18", "16:45", 90.30, FALSE, TRUE, 2, "Substituição da tela", 3, 3, 5, 5),
(6, "2023-06-22", "18:30", 65.70, TRUE, FALSE, 3, null, 4, 3, 6, 6),
(7, "2023-07-01", "20:15", 150.90, TRUE, TRUE, 1, null, 2, 1, 7, 7),
(8, "2023-04-28", "09:30", 80.60, FALSE, FALSE, 2, "Configuração de rede", 5, 2, 8, 8),
(9, "2023-03-11", "12:45", 55.40, FALSE, TRUE, 3, "Reparo no leitor", 5, 3, 9, 9);
